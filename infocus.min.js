/*
 * This file is part of infocus.
 *
 * infocus is copyright BytesNZ 2016 (http://github.com/bytesnz)
 *
 * infocus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * infocus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 */
"use strict";function findLabel(e){var t=null;if(e.hasAttribute("id")&&(t=document.querySelector('label[for="'+e.getAttribute("id")+'"]')),!t)for(t=e;(t=t.parentElement)&&"LABEL"!==t.nodeName;);return t}function infocus(e){function t(t){t.classList.contains(e.focusClass)||t.classList.add(e.focusClass)}function s(t){t.classList.contains(e.focusClass)&&t.classList.remove(e.focusClass)}var n;if("string"==typeof e?e={focusClass:e}:"undefined"==typeof e&&(e={}),e.inputSelector||(e.inputSelector="input, textarea, select"),e.focusClass||(e.focusClass="infocus"),e.storeLabels&&("function"==typeof WeakMap?n=new WeakMap:console.warn("WeakMap not available - not storing associated labels")),e.useDocListener)document.addEventListener("focus",function(s){var a;s.target.matches(e.inputSelector)&&(n&&(a=n.get(s.target))?t(a):(a=findLabel(s.target))&&(t(a),n&&n.set(s.target,a)))},!0),document.addEventListener("blur",function(t){var a;t.target.matches(e.inputSelector)&&(n&&(a=n.get(t.target))?s(a):(a=findLabel(t.target))&&(s(a),n&&n.set(t.target,a)))},!0);else{var a,o,i=document.querySelectorAll(e.inputSelector),r=i.length;for(a=0;r>a;a++)(o=findLabel(i[a]))&&(i[a].addEventListener("focus",t.bind(this,o)),i[a].addEventListener("blur",s.bind(this,o)))}}"undefined"!=typeof module&&(module.exports=infocus);